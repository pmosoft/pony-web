{"remainingRequest":"D:\\fframe\\workspace\\pony-web\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--8-1!D:\\fframe\\workspace\\pony-web\\node_modules\\ag-grid-community\\dist\\lib\\filter\\floatingFilter.js","dependencies":[{"path":"D:\\fframe\\workspace\\pony-web\\node_modules\\ag-grid-community\\dist\\lib\\filter\\floatingFilter.js","mtime":1566388027254},{"path":"D:\\fframe\\workspace\\pony-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1566388048828},{"path":"D:\\fframe\\workspace\\pony-web\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1566387884895}],"contextDependencies":[],"result":["/**\n * ag-grid-community - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v19.1.4\n * @link http://www.ag-grid.com/\n * @license MIT\n */\n\"use strict\";\nvar __extends = /*@__PURE__*/ require(\"tslib\").__extends;\nvar __decorate = /*@__PURE__*/ require(\"tslib\").__decorate;\nvar __metadata = /*@__PURE__*/ require(\"tslib\").__metadata;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar context_1 = require(\"../context/context\");\nvar dateFilter_1 = require(\"./dateFilter\");\nvar componentAnnotations_1 = require(\"../widgets/componentAnnotations\");\nvar utils_1 = require(\"../utils\");\nvar componentRecipes_1 = require(\"../components/framework/componentRecipes\");\nvar component_1 = require(\"../widgets/component\");\nvar constants_1 = require(\"../constants\");\nvar InputTextFloatingFilterComp = /*@__PURE__*/ (function (_super) {\n    __extends(InputTextFloatingFilterComp, _super);\n    function InputTextFloatingFilterComp() {\n        var _this = _super.call(this, \"<div><input ref=\\\"eColumnFloatingFilter\\\" class=\\\"ag-floating-filter-input\\\"></div>\") || this;\n        _this.lastKnownModel = null;\n        return _this;\n    }\n    InputTextFloatingFilterComp.prototype.init = function (params) {\n        this.onFloatingFilterChanged = params.onFloatingFilterChanged;\n        this.currentParentModel = params.currentParentModel;\n        var debounceMs = params.debounceMs != null ? params.debounceMs : 500;\n        var toDebounce = utils_1._.debounce(this.syncUpWithParentFilter.bind(this), debounceMs);\n        this.addDestroyableEventListener(this.eColumnFloatingFilter, 'input', toDebounce);\n        this.addDestroyableEventListener(this.eColumnFloatingFilter, 'keypress', toDebounce);\n        this.addDestroyableEventListener(this.eColumnFloatingFilter, 'keydown', toDebounce);\n        var columnDef = params.column.getDefinition();\n        if (columnDef.filterParams && columnDef.filterParams.filterOptions && columnDef.filterParams.filterOptions.length === 1 && columnDef.filterParams.filterOptions[0] === 'inRange') {\n            this.eColumnFloatingFilter.disabled = true;\n        }\n    };\n    InputTextFloatingFilterComp.prototype.onParentModelChanged = function (parentModel, combinedFilter) {\n        if (combinedFilter != null) {\n            this.eColumnFloatingFilter.value = this.parseAsText(combinedFilter.condition1) + \" \" + combinedFilter.operator + \" \" + this.parseAsText(combinedFilter.condition2);\n            this.eColumnFloatingFilter.disabled = true;\n            this.lastKnownModel = null;\n            this.eColumnFloatingFilter.title = this.eColumnFloatingFilter.value;\n            this.eColumnFloatingFilter.style.cursor = 'default';\n            return;\n        }\n        else {\n            this.eColumnFloatingFilter.disabled = false;\n        }\n        if (this.equalModels(this.lastKnownModel, parentModel)) {\n            // ensure column floating filter text is blanked out when both ranges are empty\n            if (!this.lastKnownModel && !parentModel) {\n                this.eColumnFloatingFilter.value = '';\n            }\n            return;\n        }\n        this.lastKnownModel = parentModel;\n        var incomingTextValue = this.asFloatingFilterText(parentModel);\n        if (incomingTextValue === this.eColumnFloatingFilter.value) {\n            return;\n        }\n        this.eColumnFloatingFilter.value = incomingTextValue;\n        this.eColumnFloatingFilter.title = '';\n    };\n    InputTextFloatingFilterComp.prototype.syncUpWithParentFilter = function (e) {\n        var model = this.asParentModel();\n        if (this.equalModels(this.lastKnownModel, model)) {\n            return;\n        }\n        var modelUpdated = null;\n        if (utils_1._.isKeyPressed(e, constants_1.Constants.KEY_ENTER)) {\n            modelUpdated = this.onFloatingFilterChanged({\n                model: model,\n                apply: true\n            });\n        }\n        else {\n            modelUpdated = this.onFloatingFilterChanged({\n                model: model,\n                apply: false\n            });\n        }\n        if (modelUpdated) {\n            this.lastKnownModel = model;\n        }\n    };\n    InputTextFloatingFilterComp.prototype.equalModels = function (left, right) {\n        if (utils_1._.referenceCompare(left, right)) {\n            return true;\n        }\n        if (!left || !right) {\n            return false;\n        }\n        if (Array.isArray(left) || Array.isArray(right)) {\n            return false;\n        }\n        return (utils_1._.referenceCompare(left.type, right.type) &&\n            utils_1._.referenceCompare(left.filter, right.filter) &&\n            utils_1._.referenceCompare(left.filterTo, right.filterTo) &&\n            utils_1._.referenceCompare(left.filterType, right.filterType));\n    };\n    __decorate([\n        componentAnnotations_1.RefSelector('eColumnFloatingFilter'),\n        __metadata(\"design:type\", HTMLInputElement)\n    ], InputTextFloatingFilterComp.prototype, \"eColumnFloatingFilter\", void 0);\n    return InputTextFloatingFilterComp;\n}(component_1.Component));\nexports.InputTextFloatingFilterComp = InputTextFloatingFilterComp;\nvar TextFloatingFilterComp = /*@__PURE__*/ (function (_super) {\n    __extends(TextFloatingFilterComp, _super);\n    function TextFloatingFilterComp() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TextFloatingFilterComp.prototype.asFloatingFilterText = function (parentModel) {\n        if (!parentModel) {\n            return '';\n        }\n        return parentModel.filter;\n    };\n    TextFloatingFilterComp.prototype.asParentModel = function () {\n        var currentParentModel = this.currentParentModel();\n        return {\n            type: currentParentModel.type,\n            filter: this.eColumnFloatingFilter.value,\n            filterType: 'text'\n        };\n    };\n    TextFloatingFilterComp.prototype.parseAsText = function (model) {\n        return this.asFloatingFilterText(model);\n    };\n    return TextFloatingFilterComp;\n}(InputTextFloatingFilterComp));\nexports.TextFloatingFilterComp = TextFloatingFilterComp;\nvar DateFloatingFilterComp = /*@__PURE__*/ (function (_super) {\n    __extends(DateFloatingFilterComp, _super);\n    function DateFloatingFilterComp() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.lastKnownModel = null;\n        return _this;\n    }\n    DateFloatingFilterComp.prototype.init = function (params) {\n        this.onFloatingFilterChanged = params.onFloatingFilterChanged;\n        this.currentParentModel = params.currentParentModel;\n        var debounceMs = params.debounceMs != null ? params.debounceMs : 500;\n        var toDebounce = utils_1._.debounce(this.onDateChanged.bind(this), debounceMs);\n        var dateComponentParams = {\n            onDateChanged: toDebounce,\n            filterParams: params.column.getColDef().filterParams\n        };\n        this.dateComponentPromise = this.componentRecipes.newDateComponent(dateComponentParams);\n        var body = utils_1._.loadTemplate(\"<div></div>\");\n        this.dateComponentPromise.then(function (dateComponent) {\n            body.appendChild(dateComponent.getGui());\n            var columnDef = params.column.getDefinition();\n            var isInRange = (columnDef.filterParams &&\n                columnDef.filterParams.filterOptions &&\n                columnDef.filterParams.filterOptions.length === 1 &&\n                columnDef.filterParams.filterOptions[0] === 'inRange');\n            if (dateComponent.eDateInput) {\n                dateComponent.eDateInput.disabled = isInRange;\n            }\n        });\n        this.setTemplateFromElement(body);\n    };\n    DateFloatingFilterComp.prototype.onDateChanged = function () {\n        var parentModel = this.currentParentModel();\n        var model = this.asParentModel();\n        if (this.equalModels(parentModel, model)) {\n            return;\n        }\n        this.onFloatingFilterChanged({\n            model: model,\n            apply: true\n        });\n        this.lastKnownModel = model;\n    };\n    DateFloatingFilterComp.prototype.equalModels = function (left, right) {\n        if (utils_1._.referenceCompare(left, right)) {\n            return true;\n        }\n        if (!left || !right) {\n            return false;\n        }\n        if (Array.isArray(left) || Array.isArray(right)) {\n            return false;\n        }\n        return (utils_1._.referenceCompare(left.type, right.type) &&\n            utils_1._.referenceCompare(left.dateFrom, right.dateFrom) &&\n            utils_1._.referenceCompare(left.dateTo, right.dateTo) &&\n            utils_1._.referenceCompare(left.filterType, right.filterType));\n    };\n    DateFloatingFilterComp.prototype.asParentModel = function () {\n        var currentParentModel = this.currentParentModel();\n        var filterValueDate = this.dateComponentPromise.resolveNow(null, function (dateComponent) { return dateComponent.getDate(); });\n        var filterValueText = utils_1._.serializeDateToYyyyMmDd(dateFilter_1.DateFilter.removeTimezone(filterValueDate), \"-\");\n        return {\n            type: currentParentModel.type,\n            dateFrom: filterValueText,\n            dateTo: currentParentModel ? currentParentModel.dateTo : null,\n            filterType: 'date'\n        };\n    };\n    DateFloatingFilterComp.prototype.onParentModelChanged = function (parentModel) {\n        var _this = this;\n        this.lastKnownModel = parentModel;\n        this.dateComponentPromise.then(function (dateComponent) {\n            if (!parentModel || !parentModel.dateFrom) {\n                dateComponent.setDate(null);\n                return;\n            }\n            _this.enrichDateInput(parentModel.type, parentModel.dateFrom, parentModel.dateTo, dateComponent);\n            dateComponent.setDate(utils_1._.parseYyyyMmDdToDate(parentModel.dateFrom, '-'));\n        });\n    };\n    DateFloatingFilterComp.prototype.enrichDateInput = function (type, dateFrom, dateTo, dateComponent) {\n        if (dateComponent.eDateInput) {\n            if (type === 'inRange') {\n                dateComponent.eDateInput.title = dateFrom + \" to \" + dateTo;\n                dateComponent.eDateInput.disabled = true;\n            }\n            else {\n                dateComponent.eDateInput.title = '';\n                dateComponent.eDateInput.disabled = false;\n            }\n        }\n    };\n    __decorate([\n        context_1.Autowired('componentRecipes'),\n        __metadata(\"design:type\", componentRecipes_1.ComponentRecipes)\n    ], DateFloatingFilterComp.prototype, \"componentRecipes\", void 0);\n    return DateFloatingFilterComp;\n}(component_1.Component));\nexports.DateFloatingFilterComp = DateFloatingFilterComp;\nvar NumberFloatingFilterComp = /*@__PURE__*/ (function (_super) {\n    __extends(NumberFloatingFilterComp, _super);\n    function NumberFloatingFilterComp() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NumberFloatingFilterComp.prototype.asFloatingFilterText = function (toParse) {\n        var currentParentModel = this.currentParentModel();\n        if (toParse == null && currentParentModel == null) {\n            return '';\n        }\n        if (toParse == null && currentParentModel != null && currentParentModel.type !== 'inRange') {\n            this.eColumnFloatingFilter.disabled = false;\n            return '';\n        }\n        if (currentParentModel != null && currentParentModel.type === 'inRange') {\n            this.eColumnFloatingFilter.disabled = true;\n            return this.parseAsText(currentParentModel);\n        }\n        this.eColumnFloatingFilter.disabled = false;\n        return this.parseAsText(toParse);\n    };\n    NumberFloatingFilterComp.prototype.parseAsText = function (model) {\n        var number = this.asNumber(model.filter);\n        if (model.type && model.type === 'inRange') {\n            var numberTo = this.asNumber(model.filterTo);\n            return (number ? number + '' : '') +\n                '-' +\n                (numberTo ? numberTo + '' : '');\n        }\n        return number != null ? number + '' : '';\n    };\n    NumberFloatingFilterComp.prototype.asParentModel = function () {\n        var currentParentModel = this.currentParentModel();\n        var filterValueNumber = this.asNumber(this.eColumnFloatingFilter.value);\n        var filterValueText = this.eColumnFloatingFilter.value;\n        var modelFilterValue = null;\n        if (filterValueNumber == null && filterValueText === '') {\n            modelFilterValue = null;\n        }\n        else if (filterValueNumber == null) {\n            modelFilterValue = currentParentModel.filter;\n        }\n        else {\n            modelFilterValue = filterValueNumber;\n        }\n        return {\n            type: currentParentModel.type,\n            filter: modelFilterValue,\n            filterTo: !currentParentModel ? null : currentParentModel.filterTo,\n            filterType: 'number'\n        };\n    };\n    NumberFloatingFilterComp.prototype.asNumber = function (value) {\n        if (value == null) {\n            return null;\n        }\n        if (value === '') {\n            return null;\n        }\n        var asNumber = Number(value);\n        var invalidNumber = !utils_1._.isNumeric(asNumber);\n        return invalidNumber ? null : asNumber;\n    };\n    return NumberFloatingFilterComp;\n}(InputTextFloatingFilterComp));\nexports.NumberFloatingFilterComp = NumberFloatingFilterComp;\nvar SetFloatingFilterComp = /*@__PURE__*/ (function (_super) {\n    __extends(SetFloatingFilterComp, _super);\n    function SetFloatingFilterComp() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SetFloatingFilterComp.prototype.init = function (params) {\n        _super.prototype.init.call(this, params);\n        this.eColumnFloatingFilter.disabled = true;\n    };\n    SetFloatingFilterComp.prototype.asFloatingFilterText = function (parentModel) {\n        this.eColumnFloatingFilter.disabled = true;\n        if (!parentModel)\n            return '';\n        // also supporting old filter model for backwards compatibility\n        var values = (parentModel instanceof Array) ? parentModel : parentModel.values;\n        if (values.length === 0) {\n            return '';\n        }\n        var arrayToDisplay = values.length > 10 ? values.slice(0, 10).concat('...') : values;\n        return \"(\" + values.length + \") \" + arrayToDisplay.join(\",\");\n    };\n    SetFloatingFilterComp.prototype.parseAsText = function (model) {\n        return this.asFloatingFilterText(model);\n    };\n    SetFloatingFilterComp.prototype.asParentModel = function () {\n        if (this.eColumnFloatingFilter.value == null || this.eColumnFloatingFilter.value === '') {\n            return {\n                values: [],\n                filterType: 'set'\n            };\n        }\n        return {\n            values: this.eColumnFloatingFilter.value.split(\",\"),\n            filterType: 'set'\n        };\n    };\n    SetFloatingFilterComp.prototype.equalModels = function (left, right) {\n        return false;\n    };\n    return SetFloatingFilterComp;\n}(InputTextFloatingFilterComp));\nexports.SetFloatingFilterComp = SetFloatingFilterComp;\nvar ReadModelAsStringFloatingFilterComp = /*@__PURE__*/ (function (_super) {\n    __extends(ReadModelAsStringFloatingFilterComp, _super);\n    function ReadModelAsStringFloatingFilterComp() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ReadModelAsStringFloatingFilterComp.prototype.init = function (params) {\n        _super.prototype.init.call(this, params);\n        this.eColumnFloatingFilter.disabled = true;\n    };\n    ReadModelAsStringFloatingFilterComp.prototype.onParentModelChanged = function (parentModel) {\n        this.eColumnFloatingFilter.value = this.asFloatingFilterText(this.currentParentModel());\n    };\n    ReadModelAsStringFloatingFilterComp.prototype.asFloatingFilterText = function (parentModel) {\n        return parentModel;\n    };\n    ReadModelAsStringFloatingFilterComp.prototype.parseAsText = function (model) {\n        return model;\n    };\n    ReadModelAsStringFloatingFilterComp.prototype.asParentModel = function () {\n        return null;\n    };\n    return ReadModelAsStringFloatingFilterComp;\n}(InputTextFloatingFilterComp));\nexports.ReadModelAsStringFloatingFilterComp = ReadModelAsStringFloatingFilterComp;\n",null]}