{"remainingRequest":"D:\\fframe\\workspace\\pony-web\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--8-1!D:\\fframe\\workspace\\pony-web\\node_modules\\ag-grid-community\\dist\\lib\\filter\\dateFilter.js","dependencies":[{"path":"D:\\fframe\\workspace\\pony-web\\node_modules\\ag-grid-community\\dist\\lib\\filter\\dateFilter.js","mtime":1566388031834},{"path":"D:\\fframe\\workspace\\pony-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1566388048828},{"path":"D:\\fframe\\workspace\\pony-web\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1566387884895}],"contextDependencies":[],"result":["/**\n * ag-grid-community - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v19.1.4\n * @link http://www.ag-grid.com/\n * @license MIT\n */\n\"use strict\";\nvar __extends = /*@__PURE__*/ require(\"tslib\").__extends;\nvar __decorate = /*@__PURE__*/ require(\"tslib\").__decorate;\nvar __metadata = /*@__PURE__*/ require(\"tslib\").__metadata;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar component_1 = require(\"../widgets/component\");\nvar componentAnnotations_1 = require(\"../widgets/componentAnnotations\");\nvar utils_1 = require(\"../utils\");\nvar baseFilter_1 = require(\"./baseFilter\");\nvar context_1 = require(\"../context/context\");\nvar componentRecipes_1 = require(\"../components/framework/componentRecipes\");\nvar DateFilter = /*@__PURE__*/ (function (_super) {\n    __extends(DateFilter, _super);\n    function DateFilter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DateFilter.prototype.modelFromFloatingFilter = function (from) {\n        return {\n            dateFrom: from,\n            dateTo: this.getDateTo(),\n            type: this.filter,\n            filterType: 'date'\n        };\n    };\n    DateFilter.prototype.getApplicableFilterTypes = function () {\n        return [baseFilter_1.BaseFilter.EQUALS, baseFilter_1.BaseFilter.GREATER_THAN, baseFilter_1.BaseFilter.LESS_THAN, baseFilter_1.BaseFilter.NOT_EQUAL, baseFilter_1.BaseFilter.IN_RANGE];\n    };\n    DateFilter.prototype.bodyTemplate = function (type) {\n        var fromPanelId = type == baseFilter_1.FilterConditionType.MAIN ? \"filterDateFromPanel\" : \"filterDateFromConditionPanel\";\n        var toPanelId = type == baseFilter_1.FilterConditionType.MAIN ? \"filterDateToPanel\" : \"filterDateToConditionPanel\";\n        return \"<div class=\\\"ag-filter-body\\\">\\n                    <div class=\\\"ag-filter-date-from\\\" id=\\\"\" + fromPanelId + \"\\\">\\n                    </div>\\n                    <div class=\\\"ag-filter-date-to\\\" id=\\\"\" + toPanelId + \"\\\">\\n                    </div>\\n                </div>\";\n    };\n    DateFilter.prototype.initialiseFilterBodyUi = function (type) {\n        _super.prototype.initialiseFilterBodyUi.call(this, type);\n        this.createComponents(type);\n        if (type === baseFilter_1.FilterConditionType.MAIN) {\n            this.setDateFrom_date(this.dateFrom, baseFilter_1.FilterConditionType.MAIN);\n            this.setDateTo_date(this.dateTo, baseFilter_1.FilterConditionType.MAIN);\n            this.setFilterType(this.filterCondition, baseFilter_1.FilterConditionType.MAIN);\n        }\n        else {\n            this.setDateFrom_date(this.dateFromCondition, baseFilter_1.FilterConditionType.CONDITION);\n            this.setDateTo_date(this.dateToCondition, baseFilter_1.FilterConditionType.CONDITION);\n            this.setFilterType(this.filterCondition, baseFilter_1.FilterConditionType.CONDITION);\n        }\n    };\n    DateFilter.prototype.createComponents = function (type) {\n        var _this = this;\n        var dateComponentParams = {\n            onDateChanged: function () { _this.onDateChanged(type); },\n            filterParams: this.filterParams\n        };\n        this.componentRecipes.newDateComponent(dateComponentParams).then(function (dateToComponent) {\n            if (type === baseFilter_1.FilterConditionType.MAIN) {\n                _this.dateToComponent = dateToComponent;\n            }\n            else {\n                _this.dateToConditionComponent = dateToComponent;\n            }\n            var dateToElement = dateToComponent.getGui();\n            if (type === baseFilter_1.FilterConditionType.MAIN) {\n                _this.eDateToPanel.appendChild(dateToElement);\n                if (_this.dateToComponent.afterGuiAttached) {\n                    _this.dateToComponent.afterGuiAttached();\n                }\n            }\n            else {\n                _this.eDateToConditionPanel.appendChild(dateToElement);\n                if (_this.dateToConditionComponent.afterGuiAttached) {\n                    _this.dateToConditionComponent.afterGuiAttached();\n                }\n            }\n        });\n        this.componentRecipes.newDateComponent(dateComponentParams).then(function (dateComponent) {\n            if (type === baseFilter_1.FilterConditionType.MAIN) {\n                _this.dateFromComponent = dateComponent;\n            }\n            else {\n                _this.dateFromConditionComponent = dateComponent;\n            }\n            var dateFromElement = dateComponent.getGui();\n            if (type === baseFilter_1.FilterConditionType.MAIN) {\n                _this.eDateFromPanel.appendChild(dateFromElement);\n                if (_this.dateFromComponent.afterGuiAttached) {\n                    _this.dateFromComponent.afterGuiAttached();\n                }\n            }\n            else {\n                _this.eDateFromConditionPanel.appendChild(dateFromElement);\n                if (_this.dateFromConditionComponent.afterGuiAttached) {\n                    _this.dateFromConditionComponent.afterGuiAttached();\n                }\n            }\n        });\n    };\n    DateFilter.prototype.onDateChanged = function (type) {\n        if (type === baseFilter_1.FilterConditionType.MAIN) {\n            this.dateFrom = DateFilter.removeTimezone(this.dateFromComponent.getDate());\n            this.dateTo = DateFilter.removeTimezone(this.dateToComponent.getDate());\n        }\n        else {\n            this.dateFromCondition = DateFilter.removeTimezone(this.dateFromComponent.getDate());\n            this.dateToCondition = DateFilter.removeTimezone(this.dateToComponent.getDate());\n        }\n        this.onFilterChanged();\n    };\n    DateFilter.prototype.refreshFilterBodyUi = function (type) {\n        var panel;\n        var filterTypeValue;\n        if (type === baseFilter_1.FilterConditionType.MAIN) {\n            panel = this.eDateToPanel;\n            filterTypeValue = this.filter;\n        }\n        else {\n            panel = this.eDateToConditionPanel;\n            filterTypeValue = this.filterCondition;\n        }\n        if (!panel)\n            return;\n        var visible = filterTypeValue === baseFilter_1.BaseFilter.IN_RANGE;\n        utils_1.Utils.setVisible(panel, visible);\n    };\n    DateFilter.prototype.comparator = function () {\n        return this.filterParams.comparator ? this.filterParams.comparator : this.defaultComparator.bind(this);\n    };\n    DateFilter.prototype.defaultComparator = function (filterDate, cellValue) {\n        //The default comparator assumes that the cellValue is a date\n        var cellAsDate = cellValue;\n        if (cellAsDate < filterDate) {\n            return -1;\n        }\n        if (cellAsDate > filterDate) {\n            return 1;\n        }\n        return cellValue != null ? 0 : -1;\n    };\n    DateFilter.prototype.serialize = function (type) {\n        var dateToComponent = type === baseFilter_1.FilterConditionType.MAIN ? this.dateToComponent : this.dateToConditionComponent;\n        var dateFromComponent = type === baseFilter_1.FilterConditionType.MAIN ? this.dateFromComponent : this.dateFromConditionComponent;\n        var filterType = type === baseFilter_1.FilterConditionType.MAIN ? this.filter : this.filterCondition;\n        return {\n            dateTo: utils_1.Utils.serializeDateToYyyyMmDd(dateToComponent.getDate(), \"-\"),\n            dateFrom: utils_1.Utils.serializeDateToYyyyMmDd(dateFromComponent.getDate(), \"-\"),\n            type: filterType ? filterType : this.defaultFilter,\n            filterType: 'date'\n        };\n    };\n    DateFilter.prototype.filterValues = function (type) {\n        if (type === baseFilter_1.FilterConditionType.MAIN) {\n            if (!this.dateFromComponent)\n                return null;\n            return this.filter !== baseFilter_1.BaseFilter.IN_RANGE ?\n                this.dateFromComponent.getDate() :\n                [this.dateFromComponent.getDate(), this.dateToComponent.getDate()];\n        }\n        if (!this.dateFromConditionComponent)\n            return null;\n        return this.filterCondition !== baseFilter_1.BaseFilter.IN_RANGE ?\n            this.dateFromConditionComponent.getDate() :\n            [this.dateFromConditionComponent.getDate(), this.dateToConditionComponent.getDate()];\n    };\n    // not used by ag-Grid, but exposed as part of the filter API for the client if they want it\n    DateFilter.prototype.getDateFrom = function () {\n        return utils_1.Utils.serializeDateToYyyyMmDd(this.dateFromComponent.getDate(), \"-\");\n    };\n    // not used by ag-Grid, but exposed as part of the filter API for the client if they want it\n    DateFilter.prototype.getDateTo = function () {\n        return utils_1.Utils.serializeDateToYyyyMmDd(this.dateToComponent.getDate(), \"-\");\n    };\n    // not used by ag-Grid, but exposed as part of the filter API for the client if they want it\n    DateFilter.prototype.getFilterType = function () {\n        return this.filter;\n    };\n    DateFilter.prototype.setDateFrom = function (date, type) {\n        var parsedDate = utils_1.Utils.parseYyyyMmDdToDate(date, \"-\");\n        this.setDateFrom_date(parsedDate, type);\n    };\n    DateFilter.prototype.setDateFrom_date = function (parsedDate, type) {\n        if (type === baseFilter_1.FilterConditionType.MAIN) {\n            this.dateFrom = parsedDate;\n            if (!this.dateFromComponent)\n                return;\n            this.dateFromComponent.setDate(this.dateFrom);\n        }\n        else {\n            this.dateFromCondition = parsedDate;\n            if (!this.dateFromConditionComponent)\n                return;\n            this.dateFromConditionComponent.setDate(this.dateFromCondition);\n        }\n    };\n    DateFilter.prototype.setDateTo = function (date, type) {\n        var parsedDate = utils_1.Utils.parseYyyyMmDdToDate(date, \"-\");\n        this.setDateTo_date(parsedDate, type);\n    };\n    DateFilter.prototype.setDateTo_date = function (parsedDate, type) {\n        if (type === baseFilter_1.FilterConditionType.MAIN) {\n            this.dateTo = parsedDate;\n            if (!this.dateToComponent)\n                return;\n            this.dateToComponent.setDate(this.dateTo);\n        }\n        else {\n            this.dateToCondition = parsedDate;\n            if (!this.dateToConditionComponent)\n                return;\n            this.dateToConditionComponent.setDate(this.dateToCondition);\n        }\n    };\n    DateFilter.prototype.resetState = function () {\n        this.setDateFrom(null, baseFilter_1.FilterConditionType.MAIN);\n        this.setDateTo(null, baseFilter_1.FilterConditionType.MAIN);\n        this.setFilterType(this.defaultFilter, baseFilter_1.FilterConditionType.MAIN);\n        this.setDateFrom(null, baseFilter_1.FilterConditionType.CONDITION);\n        this.setDateTo(null, baseFilter_1.FilterConditionType.CONDITION);\n        this.setFilterType(this.defaultFilter, baseFilter_1.FilterConditionType.MAIN);\n    };\n    DateFilter.prototype.parse = function (model, type) {\n        this.setDateFrom(model.dateFrom, type);\n        this.setDateTo(model.dateTo, type);\n        this.setFilterType(model.type, type);\n    };\n    DateFilter.prototype.setType = function (filterType, type) {\n        this.setFilterType(filterType, type);\n    };\n    DateFilter.removeTimezone = function (from) {\n        if (!from) {\n            return null;\n        }\n        return new Date(from.getFullYear(), from.getMonth(), from.getDate());\n    };\n    __decorate([\n        context_1.Autowired('componentRecipes'),\n        __metadata(\"design:type\", componentRecipes_1.ComponentRecipes)\n    ], DateFilter.prototype, \"componentRecipes\", void 0);\n    __decorate([\n        componentAnnotations_1.QuerySelector('#filterDateFromPanel'),\n        __metadata(\"design:type\", HTMLElement)\n    ], DateFilter.prototype, \"eDateFromPanel\", void 0);\n    __decorate([\n        componentAnnotations_1.QuerySelector('#filterDateFromConditionPanel'),\n        __metadata(\"design:type\", HTMLElement)\n    ], DateFilter.prototype, \"eDateFromConditionPanel\", void 0);\n    __decorate([\n        componentAnnotations_1.QuerySelector('#filterDateToPanel'),\n        __metadata(\"design:type\", HTMLElement)\n    ], DateFilter.prototype, \"eDateToPanel\", void 0);\n    __decorate([\n        componentAnnotations_1.QuerySelector('#filterDateToConditionPanel'),\n        __metadata(\"design:type\", HTMLElement)\n    ], DateFilter.prototype, \"eDateToConditionPanel\", void 0);\n    return DateFilter;\n}(baseFilter_1.ScalarBaseFilter));\nexports.DateFilter = DateFilter;\nvar DefaultDateComponent = /*@__PURE__*/ (function (_super) {\n    __extends(DefaultDateComponent, _super);\n    function DefaultDateComponent() {\n        return _super.call(this, \"<input class=\\\"ag-filter-filter\\\" type=\\\"text\\\" placeholder=\\\"yyyy-mm-dd\\\">\") || this;\n    }\n    DefaultDateComponent.prototype.init = function (params) {\n        this.eDateInput = this.getGui();\n        if (utils_1.Utils.isBrowserChrome() || params.filterParams.browserDatePicker) {\n            if (utils_1.Utils.isBrowserIE()) {\n                console.warn('ag-grid: browserDatePicker is specified to true, but it is not supported in IE 11, reverting to plain text date picker');\n            }\n            else {\n                this.eDateInput.type = 'date';\n            }\n        }\n        this.listener = params.onDateChanged;\n        this.addGuiEventListener('input', this.listener);\n    };\n    DefaultDateComponent.prototype.getDate = function () {\n        return utils_1.Utils.parseYyyyMmDdToDate(this.eDateInput.value, \"-\");\n    };\n    DefaultDateComponent.prototype.setDate = function (date) {\n        this.eDateInput.value = utils_1.Utils.serializeDateToYyyyMmDd(date, \"-\");\n    };\n    return DefaultDateComponent;\n}(component_1.Component));\nexports.DefaultDateComponent = DefaultDateComponent;\n",null]}